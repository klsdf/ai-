(function(){"use strict";var t={692:function(t,e,n){var a=n(9242),i=n(3396);function s(t,e,n,a,s,r){const o=(0,i.up)("TalkList");return(0,i.wg)(),(0,i.j4)(o,{characterName:s.name,dialogContent:s.content},null,8,["characterName","dialogContent"])}var r=n(7139);const o=t=>((0,i.dD)("data-v-c09e7ec0"),t=t(),(0,i.Cn)(),t),c=o((()=>(0,i._)("div",{class:"fullscreen-bg"},[(0,i._)("div",{class:"fullscreen-bg__image"})],-1))),l={id:"score-area"},u={key:0},h={key:1},d=o((()=>(0,i._)("div",{class:"image-container"},null,-1))),f={id:"dialog-area"},p={id:"dialog-content"},w={id:"dialog-user-input"},g={style:{"font-size":"25px"}};function v(t,e,n,a,s,o){const v=(0,i.up)("a-typography-paragraph"),m=(0,i.up)("a-textarea"),k=(0,i.up)("a-button");return(0,i.wg)(),(0,i.iD)(i.HY,null,[c,(0,i._)("div",l,[(0,i.Uk)(" 剩余发言机会："+(0,r.zw)(s.talkChance)+" ",1),s.win?((0,i.wg)(),(0,i.iD)("div",u,"你赢了")):(0,i.kq)("",!0),t.lose?((0,i.wg)(),(0,i.iD)("div",h,"你输了")):(0,i.kq)("",!0)]),d,(0,i._)("div",f,[(0,i._)("div",p,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.talkData,(t=>((0,i.wg)(),(0,i.j4)(v,{key:t},{default:(0,i.w5)((()=>[(0,i._)("span",null,(0,r.zw)(t.name),1),(0,i.Uk)(": "),(0,i._)("span",null,(0,r.zw)(t.content),1)])),_:2},1024)))),128))]),(0,i._)("div",w,[(0,i.Wm)(m,{modelValue:s.message,"onUpdate:modelValue":e[0]||(e[0]=t=>s.message=t),placeholder:"",style:{width:"50%"}},null,8,["modelValue"]),(0,i.Wm)(k,{type:"primary",style:{width:"20%"},onClick:o.sendMsg},{default:(0,i.w5)((()=>[(0,i.Uk)("发送数据")])),_:1},8,["onClick"]),(0,i._)("div",g,"你是："+(0,r.zw)(s.character),1)])])],64)}n(560);var m,k=n(7327);class _{constructor(t,e="主持人",n=!1){this.name=e,this.content=t,this.isWait=n}}m=_,(0,k.Z)(_,"storyData",[new m("很久很久以前，有一个可爱又很乖巧的小女孩，她总喜欢戴着外婆送给她的红色小帽子，所以大家都叫她小红帽。有一天外婆生病了，妈妈让小红帽把蛋糕和水果带去看望外婆。"),new m("妈妈提着篮子里面有蛋糕和葡萄酒上场"),new m("小红帽，你准备好了吗？","妈妈",!0),new m("第一幕:森林里"),new m("（唱）我独自走在郊外的小路上，我把糕点带给外婆尝一尝她家住在又远又僻静的地方，我要当心附近是否有大灰狼，当太阳下山岗，我要赶回家，同妈妈一起进入甜蜜梦想。","小红帽"),new m("（唱）我独自走在郊外的小路上，我把糕点带给外婆尝一尝她家住在又远又僻静的地方，我要当心附近是否有大灰狼，当太阳下山岗，我要赶回家，同妈妈一起进入甜蜜梦想。","小红帽")]);var b={StoryScript:_};b=b.StoryScript;var y={name:"TalkList",data(){return{talkData:[],message:"",character:"小红帽",talkChance:10,win:!1,false:!1}},props:["characterName","dialogContent"],methods:{ws:null,sendMsg(){if(this.talkChance--,this.talkChance<=0&&(this.false=!0),""==this.message)return void alert("不允许发送空白的留言哦！");if("init"==this.message)return void this.ws.send("init");let t=new b(this.message,this.character);this.talkData.push(t),this.ws.send(`对话：${JSON.stringify(t)}`),this.message=""},websocketinit(){this.ws=new WebSocket("ws://localhost:12345/"),this.ws.onmessage=t=>{var e=t.data;if(e.startsWith("update_web:")){let t=e.substring(11);this.talkData=JSON.parse(t),console.log(this.talkData)}else if(e.startsWith("set_character:")){let t=e.substring(14);this.character=t}else e.startsWith("win")?this.win=!0:e.startsWith("lose")&&(this.lose=!0)},this.ws.onopen=()=>{this.ws.send("new_character"),this.ws.send("update_message")}}},mounted(){this.websocketinit()}},O=n(89);const C=(0,O.Z)(y,[["render",v],["__scopeId","data-v-c09e7ec0"]]);var D=C,j={name:"App",data(){return{name:"姓名",content:"内容"}},components:{TalkList:D}};const W=(0,O.Z)(j,[["render",s]]);var x=W,S=(n(9072),n(1961));(0,a.ri)(x).use(S.Z).mount("#app")}},e={};function n(a){var i=e[a];if(void 0!==i)return i.exports;var s=e[a]={exports:{}};return t[a].call(s.exports,s,s.exports,n),s.exports}n.m=t,function(){var t=[];n.O=function(e,a,i,s){if(!a){var r=1/0;for(u=0;u<t.length;u++){a=t[u][0],i=t[u][1],s=t[u][2];for(var o=!0,c=0;c<a.length;c++)(!1&s||r>=s)&&Object.keys(n.O).every((function(t){return n.O[t](a[c])}))?a.splice(c--,1):(o=!1,s<r&&(r=s));if(o){t.splice(u--,1);var l=i();void 0!==l&&(e=l)}}return e}s=s||0;for(var u=t.length;u>0&&t[u-1][2]>s;u--)t[u]=t[u-1];t[u]=[a,i,s]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,a){var i,s,r=a[0],o=a[1],c=a[2],l=0;if(r.some((function(e){return 0!==t[e]}))){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(c)var u=c(n)}for(e&&e(a);l<r.length;l++)s=r[l],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return n.O(u)},a=self["webpackChunkai_sha2"]=self["webpackChunkai_sha2"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(692)}));a=n.O(a)})();
//# sourceMappingURL=app.6189b40c.js.map